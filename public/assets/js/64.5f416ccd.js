(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{565:function(t,s,e){"use strict";e.r(s);var a=e(4),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("集中管理状态数据，用于给多个组件进行共享")])]),t._v(" "),e("li",[e("p",[t._v("简化react的开发流程，并且降低组件之间的耦合度")])])]),t._v(" "),e("h2",{attrs:{id:"编码理解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编码理解"}},[t._v("#")]),t._v(" 编码理解")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("先在"),e("code",[t._v("index.js")]),t._v("中引入"),e("code",[t._v("Provider")]),t._v("， 将"),e("code",[t._v("store")]),t._v("以标签属性的形式传给"),e("code",[t._v("Provider")]),t._v("组件，"),e("code",[t._v("provider")]),t._v("包裹了"),e("code",[t._v("App")]),t._v("就相当于整个组件都有了"),e("code",[t._v("store")]),t._v("对象")])]),t._v(" "),e("li",[e("p",[t._v("拆分组件UI组件（"),e("code",[t._v("component")]),t._v("），UI组件中的组件首字母小写，容器组件（"),e("code",[t._v("container")]),t._v("）中的首字母大写，引入"),e("code",[t._v("connect")]),t._v("用于将UI组件包装成容器组件，相当于"),e("code",[t._v("connect")]),t._v("将普通UI组件与"),e("code",[t._v("Provider")]),t._v("相连接，让当前组件可以可以共享"),e("code",[t._v("store")]),t._v("对象，传递两个参数，第一个是函数，获取到"),e("code",[t._v("store")]),t._v("中的"),e("code",[t._v("state")]),t._v("对象，第二个是"),e("code",[t._v("action")]),t._v("方法，如果不涉及业务逻辑可以不写")])]),t._v(" "),e("li",[e("p",[t._v("如果有容器组件，那么渲染时引入的必须是容器组件，如果还继续引入UI组件相当于拿不到"),e("code",[t._v("store")]),t._v("对象，相当于容器组件没有创建，不起任何作用")])]),t._v(" "),e("li",[e("p",[t._v("之后在UI组件中以"),e("code",[t._v("this.props.xxx")]),t._v("的形式来使用，因为在"),e("code",[t._v("connect")]),t._v("包装成容器组件时已经注入，使用"),e("code",[t._v("state")]),t._v("时是"),e("code",[t._v("this.props.xxx")]),t._v("，使用"),e("code",[t._v("action")]),t._v("方法时也是"),e("code",[t._v("this.props.xxx")]),t._v("，"),e("code",[t._v("react-redux")]),t._v("底层帮我们调用了"),e("code",[t._v("this.props.store.disPatch")]),t._v("方法")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("store")]),t._v("的创建需要引入"),e("code",[t._v("createStore")]),t._v(",直接调用"),e("code",[t._v("createStore")]),t._v("（参数是"),e("code",[t._v("reducer")]),t._v("），作用是管理"),e("code",[t._v("state")]),t._v("对象，管理"),e("code",[t._v("reducer")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("reducer")]),t._v("的本质是方法，初始化"),e("code",[t._v("store")]),t._v("中"),e("code",[t._v("state")]),t._v("的状态，帮助"),e("code",[t._v("store")]),t._v("对象修改"),e("code",[t._v("state")]),t._v("的状态值，"),e("code",[t._v("switch case")]),t._v("的用法，里面设置具体的业务逻辑，需要注意的点是不能直接修改"),e("code",[t._v("state")]),t._v("对象，常用"),e("code",[t._v("[...state]")]),t._v("浅克隆一个新的"),e("code",[t._v("state")]),t._v("对象，第一个参数是"),e("code",[t._v("state")]),t._v("，利用形参默认值设置初始化的值，第二个参数是"),e("code",[t._v("action")]),t._v("对象。修改"),e("code",[t._v("state")]),t._v("的状态其实就是调用"),e("code",[t._v("reducer")]),t._v("方法，里面传的是一个"),e("code",[t._v("action")]),t._v("对象")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("action")]),t._v("本质是一个对象，定义的时候需要定义成方法，返回值是一个对象，这样可以传递数据进去，提供最新的数据，是"),e("code",[t._v("store")]),t._v("中"),e("code",[t._v("state")]),t._v("的唯一数据来源")])])]),t._v(" "),e("h2",{attrs:{id:"原生redux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原生redux"}},[t._v("#")]),t._v(" 原生redux")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("dispatch")]),t._v("的作用是分发"),e("code",[t._v("action")])])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("传递"),e("code",[t._v("action")]),t._v("对象")])]),t._v(" "),e("li",[e("p",[t._v("间接导致"),e("code",[t._v("store")]),t._v("去"),e("code",[t._v("reducer")]),t._v("调用")])])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("获取"),e("code",[t._v("state")])])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("监听"),e("code",[t._v("state")]),t._v("变化")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"redux处理异步任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redux处理异步任务"}},[t._v("#")]),t._v(" redux处理异步任务")]),t._v(" "),e("ol",[e("li",[e("p",[e("code",[t._v("Redux")]),t._v("本身不能处理异步任务")])]),t._v(" "),e("li",[e("p",[t._v("需要使用中间键： "),e("code",[t._v("redux-thunk")])])])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("npm install redux"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("thunk\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("在创建"),e("code",[t._v("store")]),t._v("对象的时候声明使用中间键：")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("counterReducer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"同步action和异步action定义方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同步action和异步action定义方式"}},[t._v("#")]),t._v(" 同步action和异步action定义方式")]),t._v(" "),e("p",[t._v("同步action：")]),t._v(" "),e("ul",[e("li",[t._v("直接定义方法返回对应的"),e("code",[t._v("action")]),t._v("对象")])]),t._v(" "),e("p",[t._v("异步action:")]),t._v(" "),e("ul",[e("li",[t._v("核心思想： 异步"),e("code",[t._v("action")]),t._v("返回值还是一个函数，"),e("code",[t._v("redux")]),t._v("会自动将"),e("code",[t._v("dispatch")]),t._v("注入，什么时候分发"),e("code",[t._v("action")]),t._v("使用者说了算")])]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("asyncIncrementAction")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("number")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dispatch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理异步行为： 发送ajax请求，开启定时器...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n      "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementAction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("h2",{attrs:{id:"其他问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他问题"}},[t._v("#")]),t._v(" 其他问题")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("一个"),e("code",[t._v("reducer")]),t._v("通常只负责操作一个状态数据，如果有多组数据，需要创建多个"),e("code",[t._v("reducer")])])]),t._v(" "),e("li",[e("p",[t._v("需要引入"),e("code",[t._v('import {combineReducers} from "redux"')])])]),t._v(" "),e("li",[e("p",[t._v("暴露的时候这样暴露："),e("code",[t._v("export default combineReducers({AReducer,BReducer})")]),t._v("，每一个"),e("code",[t._v("reducer")]),t._v("需要写成一个对象，取出的时候是"),e("code",[t._v("state.AReducer")]),t._v("和"),e("code",[t._v("state.BReducer")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);